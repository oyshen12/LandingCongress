"use strict";(self["webpackChunklanding"]=self["webpackChunklanding"]||[]).push([[745],{6745:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var r=s(4562),a=s(7039),o=s(5125),i=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"register"},[e("div",{staticClass:"register__title text24 bold"},[t._v("Войти в личный кабинет")]),e("div",{staticClass:"register__inputs"},[t.inputErrors.common?e("div",{staticClass:"register__inputs-error text24"},[t._v(" "+t._s(t.inputErrors.common)+" ")]):t._e(),e(o.Z,{ref:"formCabinet",staticClass:"register__inputs-form"},[e("MainInput",{attrs:{value:t.email,rules:["required","email"],error:""!==t.inputErrors.email,"error-message":t.inputErrors.email,autocomplete:"",label:"E-mail"},on:{input:function(e){t.email=e}}}),e("MainInput",{attrs:{value:t.password,rules:["required","min"],min:"6","type-password":"",error:""!==t.inputErrors.password,"error-message":t.inputErrors.password,autocomplete:"",label:"Пароль"},on:{input:function(e){t.password=e}}})],1),e(a.Z,{staticClass:"register__checkbox",attrs:{light:"","hide-details":"",label:"Запомнить меня"},model:{value:t.agreement,callback:function(e){t.agreement=e},expression:"agreement"}}),e("MainButton",{staticClass:"register__button",attrs:{loading:t.loadingLoginRequest,height:"40","color-red":""},on:{click:t.login}},[t._v("Войти ")]),e("MainButton",{staticClass:"register__button",attrs:{height:"40"},on:{click:t.register}},[t._v("Регистрация ")])],1),e("div",{staticClass:"divider mt-4"}),e(r.Z,{staticClass:"mt-2",attrs:{color:"white",depressed:""},on:{click:function(e){t.modalForgotPassword=!0}}},[t._v("Забыли пароль? ")]),e("ForgotPassword",{attrs:{modal:t.modalForgotPassword},on:{close:function(e){t.modalForgotPassword=!1}}})],1)},n=[],l=(s(7658),s(144)),d=s(629),u=s(1543),m=s(7818),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("DefaultModal",{staticClass:"modal",attrs:{modal:t.modal},on:{close:function(e){return t.$emit("close")}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v("Восстановление пароля")]},proxy:!0},{key:"text",fn:function(){return[t._v("Для восстановления доступа на почту придет письмо с ссылкой ")]},proxy:!0},{key:"additional",fn:function(){return[e("div",{staticClass:"modal__additional"},[t.commonError?e("div",{staticClass:"modal__additional-error text24"},[t._v(" "+t._s(t.commonError)+" ")]):t._e(),e(o.Z,{ref:"form",staticClass:"modal__additional-form",on:{submit:function(e){return e.preventDefault(),t.restorePassword.apply(null,arguments)}}},[e("MainInput",{staticClass:"modal__additional-form-input",attrs:{value:t.email,error:""!==t.emailError,"error-message":t.emailError,label:"Email",rules:["required","email"]},on:{input:function(e){t.email=e},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.restorePassword.apply(null,arguments))}}})],1),e("MainButton",{staticClass:"modal__additional-form-recovery",attrs:{loading:t.passwordRequestSending},on:{click:t.restorePassword}},[t._v("Восстановить пароль")])],1)]},proxy:!0}])})},p=[],f=s(7347),g=l.ZP.extend({name:"ForgotPassword",components:{DefaultModal:f.Z,MainInput:u.Z,MainButton:m.Z},props:{modal:{type:Boolean,default:!1}},data(){return{passwordRequestSending:!1,email:"",emailError:"",commonError:""}},computed:{form(){return this.$refs.form}},methods:{restorePassword(){const t=this.form.validate();t&&(this.passwordRequestSending=!0,this.api.post("/back/api/password-reset",{email:this.email}).then((()=>{this.openAlert("На почту выслано письмо для восстановления пароля"),this.$emit("close")})).catch((t=>{if(400===t?.response?.status&&"Errors of validation"===t?.response?.data.name){const e=t?.response?.data;e.fail.email&&(this.emailError=e.fail.email[0]),e.message&&(this.commonError=e.message)}})).finally((()=>{this.passwordRequestSending=!1})))}}}),h=g,_=s(3736),w=(0,_.Z)(h,c,p,!1,null,"76c04bbe",null),v=w.exports,b=l.ZP.extend({name:"RegisterPage",components:{MainInput:u.Z,MainButton:m.Z,ForgotPassword:v},data(){return{email:"",password:"",agreement:!1,forgotPassword:"",modalForgotPassword:!1,inputErrors:{email:"",password:"",common:""},loadingLoginRequest:!1}},computed:{...(0,d.rn)(["authed"]),formCabinet(){return this.$refs.formCabinet}},methods:{...(0,d.OI)(["setUser","setAuthed"]),login(){const t=this.formCabinet.validate();t&&(this.loadingLoginRequest=!0,this.api.post("/back/api/login",{username:this.email,password:this.password,rememberMe:this.agreement?1:0}).then((t=>{const e={id:t.data.id,accessBack:t.data.access_back,firstName:t.data.first_name,lastName:t.data.last_name,patronymic:t.data.patronymic};this.setUser(e),this.setAuthed(!0),this.$router.push({name:"Main"})})).catch((t=>{if(400===t?.response?.status&&"Errors of validation"===t?.response?.data.name){const e=t?.response?.data;e?.message&&(this.inputErrors.common=t.response.data.message),e.fail.username&&(this.inputErrors.email=e.fail.username[0]),e.fail.password&&(this.inputErrors.password=e.fail.password[0])}})).finally((()=>{this.loadingLoginRequest=!1})))},register(){this.smoothTo("register-short")}},mounted(){this.authed&&this.$router.push({name:"Main"})}}),C=b,E=(0,_.Z)(C,i,n,!1,null,"b4567be0",null),k=E.exports}}]);
//# sourceMappingURL=745.13d4f944.js.map